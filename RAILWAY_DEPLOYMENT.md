# üöÇ Railway.app Deployment Guide

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é Zharqyn Bala –Ω–∞ Railway.app

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Railway.app](https://railway.app)
- GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–æ–µ–∫—Ç–æ–º
- –ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ Docker –∏ PostgreSQL

---

## üöÄ –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Railway

### 1.1 –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

1. –í–æ–π–¥–∏—Ç–µ –Ω–∞ [Railway.app](https://railway.app)
2. –ù–∞–∂–º–∏—Ç–µ **"New Project"**
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Deploy from GitHub repo"**
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **ZharqynBala**

### 1.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç `Dockerfile` –∏ –Ω–∞—á–Ω–µ—Ç –¥–µ–ø–ª–æ–π. –ù–æ —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.

---

## üîß –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL

### 2.1 –°–æ–∑–¥–∞—Ç—å PostgreSQL —Å–µ—Ä–≤–∏—Å

1. –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **"New"** ‚Üí **"Database"** ‚Üí **"Add PostgreSQL"**
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –≤ –≤–∞—à backend —Å–µ—Ä–≤–∏—Å

### 2.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ DATABASE_URL

–í —Ä–∞–∑–¥–µ–ª–µ **Variables** –≤–∞—à–µ–≥–æ backend —Å–µ—Ä–≤–∏—Å–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
```
DATABASE_URL=postgresql://postgres:password@hostname:5432/railway
```

---

## ‚öôÔ∏è –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Environment Variables

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables** –≤–∞—à–µ–≥–æ backend —Å–µ—Ä–≤–∏—Å–∞ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
# Application
NODE_ENV=production
PORT=3001
API_PREFIX=api

# JWT (–í–ê–ñ–ù–û: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏!)
JWT_SECRET=<—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ-—Å–ª—É—á–∞–π–Ω—É—é-—Å—Ç—Ä–æ–∫—É-64-—Å–∏–º–≤–æ–ª–∞>
JWT_REFRESH_SECRET=<—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ-–¥—Ä—É–≥—É—é-—Å–ª—É—á–∞–π–Ω—É—é-—Å—Ç—Ä–æ–∫—É-64-—Å–∏–º–≤–æ–ª–∞>
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# CORS (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–º–µ–Ω)
CORS_ORIGIN=https://your-frontend-domain.com
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π

```bash
# –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–¥–æ–±–∞–≤—å—Ç–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

```bash
# Email (SendGrid)
SENDGRID_API_KEY=your-key

# SMS (Twilio)
TWILIO_ACCOUNT_SID=your-sid
TWILIO_AUTH_TOKEN=your-token

# Kaspi Pay
KASPI_MERCHANT_ID=your-merchant-id
KASPI_API_KEY=your-api-key
```

---

## üê≥ –®–∞–≥ 4: –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 4.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ:
1. –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è `Dockerfile`
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 4.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Deployments"**
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:
```
‚úÖ Database connected
üöÄ Application is running on: http://localhost:3001
```

### 4.3 –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π Prisma

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ–º–∞–Ω–¥–µ –≤ `railway.json`:
```json
"startCommand": "npm run start:migrate:prod"
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. `prisma migrate deploy` - –ø—Ä–∏–º–µ–Ω–∏—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
2. `npm run start:prod` - –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

## üåê –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

### 5.1 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Railway –¥–æ–º–µ–Ω–∞

1. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø—É–±–ª–∏—á–Ω—ã–π URL:
   ```
   https://your-app-name.up.railway.app
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ **Settings** ‚Üí **Networking**
3. –ù–∞–∂–º–∏—Ç–µ **"Generate Domain"**

### 5.2 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Domains**
2. –ù–∞–∂–º–∏—Ç–µ **"Custom Domain"**
3. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `api.zharqynbala.kz`)
4. –î–æ–±–∞–≤—å—Ç–µ CNAME –∑–∞–ø–∏—Å—å –≤ DNS:
   ```
   CNAME api.zharqynbala.kz ‚Üí your-app.up.railway.app
   ```

---

## ‚úÖ –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### 6.1 Health Check

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://your-app.up.railway.app/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "status": "ok",
  "timestamp": "2025-12-05T12:00:00.000Z",
  "uptime": 123.456
}
```

### 6.2 API Documentation (–µ—Å–ª–∏ –Ω–µ production)

–ï—Å–ª–∏ –≤—ã –≤—Ä–µ–º–µ–Ω–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å Swagger:
1. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `NODE_ENV` –Ω–∞ `development`
2. –û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-app.up.railway.app/api/docs`
3. **–í–ê–ñ–ù–û:** –í–µ—Ä–Ω–∏—Ç–µ `NODE_ENV=production` –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏!

### 6.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

```bash
# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X POST https://your-app.up.railway.app/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "SecurePassword123!",
    "firstName": "–¢–µ—Å—Ç",
    "lastName": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"
  }'
```

---

## üîÑ –®–∞–≥ 7: Continuous Deployment (CI/CD)

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç CI/CD:

- **–ö–∞–∂–¥—ã–π push –≤ main branch** ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
- **Pull Requests** ‚Üí preview deployments
- **Rollback** ‚Üí –æ—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**Settings** ‚Üí **Deploy Triggers** ‚Üí –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Deployments"**
3. –í—ã–±–µ—Ä–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–π –¥–µ–ø–ª–æ–π
4. –ù–∞–∂–º–∏—Ç–µ **"View Logs"**

### –ú–µ—Ç—Ä–∏–∫–∏

Railway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏:
- CPU usage
- Memory usage
- Network traffic

–î–æ—Å—Ç—É–ø–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ **"Metrics"**

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –ø–ª–∞–Ω—ã

### Starter Plan (Free)

- $5 –º–µ—Å—è—á–Ω—ã–π –∫—Ä–µ–¥–∏—Ç (‚âà500 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã)
- –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è MVP –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Developer Plan ($20/–º–µ—Å—è—Ü)

- $20 –∫—Ä–µ–¥–∏—Ç–∞ –≤–∫–ª—é—á–µ–Ω–æ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤

```dockerfile
# –í Dockerfile —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
FROM node:20-alpine  # –õ–µ–≥–∫–∏–π –æ–±—Ä–∞–∑
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: DATABASE_URL –Ω–µ –Ω–∞–π–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` –µ—Å—Ç—å –≤ Variables
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ:
# "prisma migrate deploy"
# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL
```

### –ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç `3001` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `PORT=3001`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ –∑–∞–ø—É—Å–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: CORS –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ–º–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
CORS_ORIGIN=https://your-frontend.com

# –î–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (–≤ –±—É–¥—É—â–µ–º):
CORS_ORIGIN=https://app.com,https://www.app.com
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß–µ–∫–ª–∏—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ JWT —Å–µ–∫—Ä–µ—Ç—ã (64+ —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ –í–∫–ª—é—á–∏—Ç–µ HTTPS (Railway –¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π CORS_ORIGIN
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫

---

## üì± Next Steps

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ S3 –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ Kaspi Pay –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SendGrid –¥–ª—è email —Ä–∞—Å—Å—ã–ª–æ–∫
5. ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç–µ Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- Railway Documentation: https://docs.railway.app
- Railway Discord: https://discord.gg/railway
- Zharqyn Bala Issues: https://github.com/your-repo/issues

---

**–ì–æ—Ç–æ–≤–æ!** –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ Railway! üéâ
